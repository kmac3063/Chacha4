(this["webpackJsonpmini-app"]=this["webpackJsonpmini-app"]||[]).push([[0],{148:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(40),a=n.n(s),r=n(26),i=n.n(r),o=n(13),l=n.n(o),u=n(20),j=n(21),d=n(12),h=(n(146),n(35)),b=n(149),f=n(7),p=function(e){var t=e.id,n=e.go,s=e.fetchedUser,a=(e.scheme,e.host),r=e.status,o=e.db,l=Object(c.useState)(0),u=Object(j.a)(l,2),p=u[0],O=u[1],x=Object(c.useState)(null),g=Object(j.a)(x,2),m=g[0],v=g[1],y=Object(c.useState)("00000000P"),S=Object(j.a)(y,2),I=S[0],k=S[1];Object(c.useEffect)((function(){var e=null;if("connect"===r){if(null===a)return;console.log(a);var t=Object(h.a)(o,"hs",a.id.toString());e=setInterval((function(){Object(h.b)(t).then((function(e){e.exists()&&(console.log("snap.data().stateString: "+e.data().stateString),k((function(){return e.data().stateString})))}))}),250)}return function(){null!==e&&clearInterval(e)}}),[]),Object(c.useEffect)((function(){console.log("useEffect stateString:"+I),"host"===r&&Object(h.d)(Object(h.a)(o,"hs",s.id.toString()),{stateString:I}),clearInterval(m),"R"===I[I.length-1]?F():(O(0),i.a.send("VKWebAppFlashSetLevel",{level:0}))}),[I]);var C=function(e,t){k((function(t){var n=t.slice(0,e)+("1"===t[e]?"0":"1")+t.slice(e+1,8)+"P";return console.log(n),n}))},F=function(){var e=0;O(1),i.a.send("VKWebAppFlashSetLevel",{level:parseInt(I[0])});var t=setInterval((function(){O((function(e){return 1+e%8})),e=(e+1)%8,i.a.send("VKWebAppFlashSetLevel",{level:parseInt(I[e])})}),1e3);v(t)};return Object(f.jsxs)(d.h,{id:t,children:[Object(f.jsx)(d.i,{left:Object(f.jsx)(d.j,{onClick:n,"data-to":"Choose"}),children:"host"===r?"\u0414\u0438\u0434\u0436\u0435\u0439":"\u0421\u043b\u0443\u0448\u0430\u0442\u0435\u043b\u044c"}),"host"===r?Object(f.jsx)(d.f,{children:Object(f.jsxs)(d.e,{style:{display:"flex"},children:[Object(f.jsx)(d.c,{size:"l",stretched:!0,style:{marginRight:8},onClick:function(){k((function(e){return e.slice(0,8)+"R"}))},children:"\u041d\u0430\u0447\u0430\u0442\u044c"}),Object(f.jsx)(d.c,{size:"l",stretched:!0,mode:"secondary",onClick:function(){k((function(e){return e.slice(0,8)+"P"}))},children:"\u041e\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})]})}):Object(f.jsx)(d.d,{before:Object(f.jsx)(b.a,{}),children:null!==a?a.first_name+" "+a.last_name:"..."}),Object(f.jsxs)(d.f,{children:[Object(f.jsx)(d.g,{mode:"secondary",children:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0441\u0435\u043a\u0443\u043d\u0434\u0430\u043c\u0438"}),Object(f.jsx)(d.e,{style:{display:"flex",justifyContent:"space-between",overflow:"auto"},children:I.split("").map((function(e,t){return"0"!==e&&"1"!==e?null:Object(f.jsxs)(d.e,{style:{padding:"0",backgroundColor:t+1===p?"#D7FDDB":"#FFFFFF"},children:[Object(f.jsxs)(d.e,{style:{padding:"0"},children:[t+1," \u0441\u0435\u043a"]}),"host"===r?Object(f.jsx)(d.m,{checked:"1"===e,onChange:function(e){return C(t,e.target.value)}}):Object(f.jsx)(d.m,{checked:"1"===e,disabled:!0,onChange:function(e){return C(t,e.target.value)}})]},t)}))})]}),Object(f.jsxs)(d.f,{children:[Object(f.jsx)(d.g,{mode:"secondary",children:"host"===r?"\u042d\u0442\u043e \u0432\u0430\u0448\u0430 \u043a\u043e\u043c\u043d\u0430\u0442\u0430":"\u0412\u044b \u0441\u043b\u0443\u0448\u0438\u0442\u0435\u043b\u044c"}),Object(f.jsx)(d.d,{multiline:!0,children:"host"===r?"\u0412\u0441\u0435 \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0432\u0448\u0438\u0435\u0441\u044f \u043a \u0432\u0430\u043c \u043b\u044e\u0434\u0438 \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0441\u0438\u0433\u043d\u0430\u043b \u043e \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0438 \u0444\u043e\u043d\u0430\u0440\u0438\u043a\u0430 \u0432 \u043e\u0434\u0438\u043d \u043c\u043e\u043c\u0435\u043d\u0442 \u0441 \u0432\u0430\u043c\u0438":"\u0416\u0434\u0438\u0442\u0435, \u043f\u043e\u043a\u0430 \u0432\u043b\u0430\u0434\u0435\u043b\u0435\u0446 \u043a\u043e\u043c\u043d\u0430\u0442\u044b \u0432\u043a\u043b\u044e\u0447\u0438\u0442 \u0432\u0430\u043c \u0444\u043e\u043d\u0430\u0440\u0438\u043a!"})]})]})},O=(n.p,n(150)),x=function(e){var t=e.id,n=(e.go,e.fetchedUser,e.scheme,e.connect),c=e.host;return Object(f.jsxs)(d.h,{id:t,children:[Object(f.jsx)(d.i,{children:"\u041e\u0434\u0438\u043d-\u043d\u043e\u043b\u044c \u0444\u043e\u043d\u0430\u0440\u0438\u043a"}),Object(f.jsx)(d.f,{children:Object(f.jsxs)(d.e,{style:{display:"flex"},children:[Object(f.jsx)(d.c,{size:"l",stretched:!0,style:{marginRight:8},onClick:n,"data-to":"Home",children:"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f"}),Object(f.jsx)(d.c,{size:"l",stretched:!0,mode:"secondary",onClick:c,"data-to":"Home",children:"\u0411\u044b\u0442\u044c \u0434\u0438\u0434\u0436\u0435\u0435\u043c"})]})})]})},g=function(e){var t=e.id,n=(e.fetchedUser,e.go);return Object(f.jsx)(d.h,{id:t,children:Object(f.jsx)(d.f,{children:Object(f.jsx)(d.k,{icon:Object(f.jsx)(O.a,{}),header:"\u041f\u0440\u0438\u0432\u0435\u0442\u0441\u0442\u0432\u0443\u0435\u043c, \u041f\u0440\u0438\u044f\u0442\u0435\u043b\u044c!",action:Object(f.jsx)(d.c,{size:"m",onClick:n,"data-to":"Choose",children:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438 \u043a \u0444\u043e\u043d\u0430\u0440\u0438\u043a\u0443"}),children:'\u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0432 \u0440\u0430\u043c\u043a\u0430\u0445 \u0445\u0430\u043a\u0430\u0442\u043e\u043d\u0430 "\u0412\u0435\u0437\u0434\u0435\u043a\u043e\u0434 2021"'})})})},m=n(54),v=function(){var e=Object(c.useState)("Choose"),t=Object(j.a)(e,2),n=t[0],s=t[1],a=Object(c.useState)(null),r=Object(j.a)(a,2),o=r[0],b=r[1],O=Object(c.useState)(Object(f.jsx)(d.l,{size:"large"})),v=Object(j.a)(O,2),y=v[0],S=v[1],I=Object(c.useState)(null),k=Object(j.a)(I,2),C=(k[0],k[1]),F=Object(c.useState)(null),A=Object(j.a)(F,2),K=A[0],U=A[1],W=Object(c.useState)("connect"),w=Object(j.a)(W,2),V=w[0],z=w[1],E=Object(m.a)({apiKey:"AIzaSyA4pTIWp427xU-6UKZhMS5gm7jgZpnjTaM",authDomain:"chacha4-45297.firebaseapp.com",projectId:"chacha4-45297",storageBucket:"chacha4-45297.appspot.com",messagingSenderId:"908778198952",appId:"1:908778198952:web:a3d68cc210e47a638aaf9d"}),H=Object(h.c)(E);Object(c.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),e.next=3,i.a.send("VKWebAppGetUserInfo");case 3:t=e.sent,b(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.a.send("VKWebAppFlashGetInfo").then((function(e){e.is_available||alert("\u041d\u0430 \u0432\u0430\u0448\u0435\u043c \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0435 \u043e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442/\u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u0444\u043e\u043d\u0430\u0440\u0438\u043a :(")}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}i.a.subscribe((function(e){var t=e.detail,n=t.type;t.data;if("VKWebAppUpdateConfig"===n){var c=document.createAttribute("scheme");c.value="client_light",C(c.value),document.body.attributes.setNamedItem(c)}})),function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]);var D=function(e){s(e.currentTarget.dataset.to)};return Object(f.jsx)(d.a,{children:Object(f.jsx)(d.b,{children:Object(f.jsxs)(d.n,{activePanel:n,popout:y,children:[Object(f.jsx)(g,{id:"WelcomeScreen",fetchedUser:o,go:D}),Object(f.jsx)(x,{id:"Choose",fetchedUser:o,go:D,connect:function(){i.a.send("VKWebAppGetFriends",{}).then((function(e){U((function(){return e.users[0]})),z("connect"),s((function(){return"Home"}))}))},host:function(){z("host"),s((function(){return"Home"})),U((function(){return null}))}}),Object(f.jsx)(p,{id:"Home",fetchedUser:o,go:D,host:K,status:V,db:H})]})})})};i.a.send("VKWebAppInit"),a.a.render(Object(f.jsx)(v,{}),document.getElementById("root"))}},[[148,1,2]]]);
//# sourceMappingURL=main.4ae62497.chunk.js.map